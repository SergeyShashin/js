<script>

  const puzzle = [
    'ANGULAR',
    'REDNCAE',
    'RFIDTCL',
    'AGNEGSA',
    'YTIRTSP'
  ]

  console.log(findWord(puzzle, 'ANGULAR')); //true
  // console.log(findWord(puzzle, 'REACT')); //true
  // console.log(findWord(puzzle, 'ARRAY')); //true


  /*
  Возвращает true, если в puzzle можно собрать слово word. В остальных случая false.
  Перемещаться можно по вертикали или горизонтали. Нарушть границы нельзя. Буквы из puzzle можно использовать только 1 раз.
  */
  function findWord(puzzle, word) {
    let result = true;
    const alphabet = englishAlphabet();
    let lengthPuzzle = puzzle.length;

    //собираем объект с индексами букв puzzle
    puzzle.map((row, idxRow) => {
      row.split('').map((col, idxCol) => {
        alphabet[col].push({ row: idxRow, col: idxCol });
      })
    })

    // console.log(alphabet);

    word.split('').map((char, idxChar) => {
      if (alphabet[char] && word[idxChar + 1]) {

        console.log('этот символ ' + char);
        console.log(alphabet[char]);

        let nextChar = word[idxChar + 1];
        console.log('следующий символ ' + nextChar);
        console.log(alphabet[nextChar]);

        if (!checkStep(alphabet[char], alphabet[nextChar], lengthPuzzle)) {
          result = false;
          return
        }

        // проверка возможности наличия пути из последнего символа word в предпоследний
      } else if (word[idxChar]) {
        console.log('зашли сюда ');

        let prevChar = word[idxChar - 1];
        console.log('символ ' + prevChar);
        console.log(alphabet[prevChar]);

        let lastChar = word[idxChar];
        console.log('символ ' + lastChar);
        console.log(alphabet[lastChar]);

        if (!checkStep(alphabet[prevChar], alphabet[lastChar], lengthPuzzle)) {
          result = false;
          return
        }

      }
      else {
        result = false;
        return
      }

    });

    return result
  }

  /*
  Создаёт объект с английскими буквами
  */
  function englishAlphabet() {
    const alphabet = {};

    for (let i = 65; i < 91; i++) {
      alphabet[String.fromCharCode(i)] = [];
    }

    return alphabet
  }

  /*
  Возращает true, если можно шагнуть к следующей букве и false, если нельзя 
  */
  function checkStep(coordinatesChar, coordinatesNextChar, lengthPuzzle) {

    let isStepLeft;
    let isStepRight;
    let isStepTop;
    let isStepDown;

    for (let coordinateNextChar of coordinatesNextChar) {
      // console.log(coordinateNextChar);
      // console.log(coordinateNextChar.col);

      let nextCol = coordinateNextChar.col;

      if (nextCol - 1 >= 0) {
        // console.log(nextCol - 1);
        if (checkStepLeft(coordinatesChar, nextCol - 1)) {
          // console.log('Вариант есть');
          // console.log(coordinateNextChar);
          isStepLeft = true;
        };
      }

      if (nextCol + 1 <= lengthPuzzle) {
        // console.log(nextCol + 1);
        if (checkStepLeft(coordinatesChar, nextCol + 1)) {

          // console.log('Вариант есть');
          // console.log(coordinateNextChar);
        };
      }


    }

    console.log('Возможность шагать влево ' + isStepLeft);
    console.log('Возможность шагать влево ' + isStepRight);
    console.log('Возможность шагать влево ' + isStepTop);
    console.log('Возможность шагать влево ' + isStepDown);

    return isStepLeft||isStepRight||isStepTop||isStepDown;
  }

  /*
  Возвращает true если шаг влево воможен
  */
  function checkStepLeft(coordinatesChar, col) {

    for (let coordinateChar of coordinatesChar) {

      if (coordinateChar.col === col) {
        return true
      }

    }

  }


</script>